#!/usr/bin/python3
# De una lista de URL de github las descarga en formato raw y busca ciertos patrones (passwords, correos, etc)
import pprint
import re
import json
import requests
from urllib.parse import quote
import time
import sys
import argparse

def encodeURL(url):
    url = str(quote(url)) #Codificar URL
    return url.replace("%3A" ,":")

parser = argparse.ArgumentParser()
parser.add_argument("--file" ,"-f" ,help="set file")
parser.parse_args()
args = parser.parse_args()

# Using readlines()
fileGithubURL = open(args.file ,'r')
sitios = fileGithubURL.readlines() 
# Strips the newline character
respuestasOK = 0
respuestasNO = 0
for url in sitios:
    #url=encodeURL(url)  
    url = url.strip('\n')  
    newHeaders = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML ,like Gecko) Chrome/40.0.2214.85 Safari/537.36'}
    #print(f'link {link} ')
    try:
        response = requests.get(url,headers=newHeaders)
        print(f'{url} : {response.status_code}')
        if str(response.status_code)  in ["200","403"]:
            respuestasOK = respuestasOK + 1 
        else:
            respuestasNO =  respuestasNO + 1
        print(f'respuestasOK {respuestasOK} ')
        print(f'respuestasNO {respuestasNO} ')
        print ("\n")
    except:
        print("An exception occurred")

    
    
   

